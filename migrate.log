2025-10-13T13:26:26.225Z
cwd: ~\GitHub\das-assessor-service-prototype
package: govuk-prototype-kit@13.18.1
argv: C:\Program Files\nodejs\node.exe ~\AppData\Local\npm-cache\_npx\751a68202a4807b7\node_modules\govuk-prototype-kit\bin\cli migrate
Started [Check migration is being applied to a pre v13 prototype]
Succeeded [Check migration is being applied to a pre v13 prototype]
2025-10-13T13:26:38.996Z
cwd: ~\GitHub\das-assessor-service-prototype
package: govuk-prototype-kit@13.18.1
argv: C:\Program Files\nodejs\node.exe ~\GitHub\das-assessor-service-prototype\node_modules\govuk-prototype-kit\bin\cli migrate -- ~\GitHub\das-assessor-service-prototype
Started [Migrate config.js to config.json]
Started [Update application SCSS file]
Started [Deleted files that are no longer needed]
Started [Deleted directories that are no longer needed]
Started [Delete listen-on-port.js]
Started [Delete gulpfile.js]
Started [Delete start.js]
Started [Delete server.js]
Started [Delete Procfile]
Started [Delete VERSION.txt]
Started [Delete app/assets/sass/application-ie8.scss]
Started [Delete app/assets/sass/unbranded-ie8.scss]
Started [Remove unused directory docs]
Started [Remove unused directory gulp]
Started [Remove unused directory lib]
Started [Remove unused directory public]
Succeeded [Migrate config.js to config.json]
Succeeded [Delete server.js]
Succeeded [Delete gulpfile.js]
Succeeded [Delete listen-on-port.js]
Succeeded [Delete start.js]
Succeeded [Delete Procfile]
Succeeded [Delete VERSION.txt]
Succeeded [Delete app/assets/sass/application-ie8.scss]
Succeeded [Delete app/assets/sass/unbranded-ie8.scss]
Succeeded [Deleted files that are no longer needed]
Found [// Add your routes here - above the module.exports line] in [app\routes.js], replacing
Started [Overwrite app/assets/javascripts/application.js]
Started [Overwrite app/filters.js]
Started [Overwrite app/views/layout.html]
Keeping these lines from old file
Found [// Add extra styles here, or re-organise the Sass files in whichever way makes most sense to you] in [app\assets\sass\application.scss], replacing
Started [Update app/assets/javascripts/application.js]
Copying from [node_modules\govuk-prototype-kit\prototype-starter\app\filters.js] to [app\filters.js]
Copying from [node_modules\govuk-prototype-kit\prototype-starter\app\views\layouts\main.html] to [app\views\layout.html]
Started [Delete app/assets/images/separator.png]
Started [Delete app/assets/images/unbranded.ico]
Started [Delete app/assets/javascripts/auto-store-data.js]
Started [Delete app/assets/images/separator-2x.png]
Started [Delete app/views/includes/cookie-banner.html]
Started [Delete app/assets/sass/unbranded.scss]
Started [Delete app/views/includes/head.html]
Started [Delete app/views/includes/breadcrumb_examples.html]
Started [Delete app/views/layout_unbranded.html]
Started [Delete app/views/includes/scripts.html]
Started [Delete app/assets/javascripts/jquery-1.11.3.js]
Started [Delete app/assets/sass/patterns/_related-items.scss]
Started [Delete app/assets/sass/patterns/_step-by-step-related.scss]
Started [Delete app/assets/sass/patterns/_step-by-step-header.scss]
Started [Delete app/assets/sass/patterns/_step-by-step-nav.scss]
Started [Delete app/assets/sass/patterns/_task-list.scss]
Keeping these lines from old file
Succeeded [Remove unused directory gulp]
Failed [Delete app/assets/images/unbranded.ico]
Failed [Delete app/views/includes/cookie-banner.html]
Failed [Delete app/views/includes/scripts.html]
Succeeded [Delete app/assets/images/separator.png]
Succeeded [Delete app/assets/sass/unbranded.scss]
Succeeded [Delete app/assets/javascripts/auto-store-data.js]
Succeeded [Delete app/assets/images/separator-2x.png]
Succeeded [Delete app/views/includes/head.html]
Succeeded [Delete app/views/includes/breadcrumb_examples.html]
Succeeded [Delete app/views/layout_unbranded.html]
Succeeded [Delete app/assets/sass/patterns/_step-by-step-header.scss]
Succeeded [Delete app/assets/javascripts/jquery-1.11.3.js]
Succeeded [Delete app/assets/sass/patterns/_related-items.scss]
Succeeded [Delete app/assets/sass/patterns/_step-by-step-nav.scss]
Succeeded [Delete app/assets/sass/patterns/_step-by-step-related.scss]
Succeeded [Delete app/assets/sass/patterns/_task-list.scss]
Succeeded [Update application SCSS file]
//,// For guidance on how to create routes see:,// https://prototype-kit.service.gov.uk/docs/create-routes,//,,const govukPrototypeKit = require('govuk-prototype-kit'),const router = govukPrototypeKit.requests.setupRouter(),,// Add your routes here,,,// record-a-grade: who to send certificate to,router.post('/record-a-grade/v1/no-address-saved/send-the-certificate', (req, res) => {,	if(req.session.data['send-the-certificate'] == 'apprentice'){,		res.redirect('apprentice-search-address');,	} else if(req.session.data['send-the-certificate'] == 'employer'){,        res.redirect('employer-address');,	} else if(req.session.data['send-the-certificate'] == 'provider'){,        res.redirect('provider-address');,    },});,,router.post('/record-a-grade/v2/no-address-saved/send-the-certificate', (req, res) => {,	if(req.session.data['send-the-certificate'] == 'apprentice'){,		res.redirect('apprentice-search-address');,	} else if(req.session.data['send-the-certificate'] == 'employer'){,        res.redirect('employer-search-address');,	} else if(req.session.data['send-the-certificate'] == 'provider'){,        res.redirect('provider-address');,    },});,,// record-a-grade: who to send certificate to,router.post('/record-a-grade/v1/no-address-saved/send-the-certificate', (req, res) => {,	if(req.session.data['send-the-certificate'] == 'apprentice'){,		res.redirect('apprentice-search-address');,	} else if(req.session.data['send-the-certificate'] == 'employer'){,        res.redirect('employer-address');,	} else if(req.session.data['send-the-certificate'] == 'provider'){,        res.redirect('provider-address');,    },});,,router.post('/record-a-grade/v2/no-address-saved/send-the-certificate', (req, res) => {,	if(req.session.data['send-the-certificate'] == 'apprentice'){,		res.redirect('apprentice-search-address');,	} else if(req.session.data['send-the-certificate'] == 'employer'){,        res.redirect('employer-address');,	} else if(req.session.data['send-the-certificate'] == 'provider'){,        res.redirect('provider-address');,    },});,,,// record-a-grade: apprentice search address,router.post('/record-a-grade/v1/no-address-saved/apprentice-find-address', function (req, res) {,	if(req.session.data['street-number-house-name'] == '14'){,		res.redirect('apprentice-select-address-1');,	} else if(req.session.data['street-number-house-name'] == 'test'){,        res.redirect('apprentice-select-address-0');,	} else if(req.session.data['street-number-house-name'] == 'Test'){,        res.redirect('apprentice-select-address-0');,    } else res.redirect('apprentice-select-address');,});,,router.post('/record-a-grade/v2/no-address-saved/apprentice-find-address', function (req, res) {,	if(req.session.data['street-number-house-name'] == '14'){,		res.redirect('apprentice-select-address-1');,	} else if(req.session.data['street-number-house-name'] == 'test'){,        res.redirect('apprentice-select-address-0');,	} else if(req.session.data['street-number-house-name'] == 'Test'){,        res.redirect('apprentice-select-address-0');,    } else res.redirect('apprentice-select-address');,});,,// record-a-grade: employer search address,router.post('/record-a-grade/v1/no-address-saved/employer-find-address', function (req, res) {,	if(req.session.data['company-building-name'] == '14'){,		res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ONA'){,        res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ona'){,        res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ONA Consulting'){,        res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ONA consulting'){,        res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ona consulting'){,        res.redirect('employer-select-address-1');	,	} else if(req.session.data['company-building-name'] == 'test'){,        res.redirect('employer-select-address-0');,	} else if(req.session.data['company-building-name'] == 'Test'){,        res.redirect('apprentice-select-address-0');,    } else res.redirect('employer-select-address');,});,,router.post('/record-a-grade/v2/no-address-saved/employer-find-address', function (req, res) {,	if(req.session.data['company-building-name'] == '14'){,		res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ONA'){,        res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ona'){,        res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ONA Consulting'){,        res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ONA consulting'){,        res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ona consulting'){,        res.redirect('employer-select-address-1');	,	} else if(req.session.data['company-building-name'] == 'test'){,        res.redirect('employer-select-address-0');,	} else if(req.session.data['company-building-name'] == 'Test'){,        res.redirect('apprentice-select-address-0');,    } else res.redirect('employer-select-address');,});,,// record-a-grade: who to send certificate to (saved address),router.post('/record-a-grade/v1/address-saved/send-the-certificate', (req, res) => {,	if(req.session.data['send-the-certificate'] == 'employer'){,        res.redirect('employer-address-saved');,    },});,,router.post('/record-a-grade/v2/address-saved/send-the-certificate', (req, res) => {,	if(req.session.data['send-the-certificate'] == 'employer'){,        res.redirect('employer-search-address');,    },});,,// record-a-grade: select employer address (saved address),router.post('/record-a-grade/v1/address-saved/employer-address-saved', function (req, res) {,	if(req.session.data['choose-employer-address'] == 'address-system'){,		res.redirect('employer-details');,	} else if(req.session.data['choose-employer-address'] == 'address-last-used'){,        res.redirect('employer-details');,	} else if(req.session.data['choose-employer-address'] == 'search-address'){,        res.redirect('employer-search-address');,    } ,});,,router.post('/record-a-grade/v2/address-saved/employer-address-saved', function (req, res) {,	if(req.session.data['choose-employer-address'] == 'address-system'){,		res.redirect('employer-details');,	} else if(req.session.data['choose-employer-address'] == 'address-last-used'){,        res.redirect('employer-details');,	} else if(req.session.data['choose-employer-address'] == 'search-address'){,        res.redirect('employer-search-address');,    } ,});,,router.post('/record-a-grade/v2/address-saved/send-the-certificate', function (req, res) {,	if(req.session.data['choose-employer-address'] == 'address-system'){,		res.redirect('employer-details');,	} else if(req.session.data['choose-employer-address'] == 'address-last-used'){,        res.redirect('employer-details');,	} else if(req.session.data['choose-employer-address'] == 'search-address'){,        res.redirect('employer-search-address');,    } ,});,,router.post('/record-a-grade/v2/address-saved/employer-last-address', function (req, res) {,	if(req.session.data['employer-last-address'] == 'yes'){,		res.redirect('employer-details');,	} else if(req.session.data['employer-last-address'] == 'no'){,        res.redirect('employer-search-address');,    } ,});,,,// record-a-grade: employer search address (saved address),router.post('/record-a-grade/v1/address-saved/employer-find-address', function (req, res) {,	if(req.session.data['company-building-name'] == '14'){,		res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ONA'){,        res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ona'){,        res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ONA Consulting'){,        res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ONA consulting'){,        res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ona consulting'){,        res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'test'){,        res.redirect('employer-select-address-0');,	} else if(req.session.data['company-building-name'] == 'Test'){,        res.redirect('apprentice-select-address-0');,    } else res.redirect('employer-select-address');,});,,router.post('/record-a-grade/v2/address-saved/employer-find-address', function (req, res) {,	if(req.session.data['company-building-name'] == '14'){,		res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ONA'){,        res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ona'){,        res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ONA Consulting'){,        res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ONA consulting'){,        res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'ona consulting'){,        res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'test'){,        res.redirect('employer-select-address-0');,	} else if(req.session.data['company-building-name'] == 'Test'){,        res.redirect('apprentice-select-address-0');,    } else res.redirect('employer-select-address');,});,,,// record-a-grade: employer search address (saved address),router.post('/record-a-grade/v1/address-saved/employer-find-address', function (req, res) {,	if(req.session.data['company-building-name'] == '14'){,		res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'test'){,        res.redirect('employer-select-address-0');,	} else if(req.session.data['company-building-name'] == 'Test'){,        res.redirect('apprentice-select-address-0');,    } else res.redirect('employer-select-address');,});,,router.post('/record-a-grade/v2/address-saved/employer-find-address', function (req, res) {,	if(req.session.data['company-building-name'] == '14'){,		res.redirect('employer-select-address-1');,	} else if(req.session.data['company-building-name'] == 'test'){,        res.redirect('employer-select-address-0');,	} else if(req.session.data['company-building-name'] == 'Test'){,        res.redirect('apprentice-select-address-0');,    } else res.redirect('employer-select-address');,});,,router.post('/record-a-grade/v2/no-address-saved/employer-use-details', (req, res) => {,	if(req.session.data['employer-address-details'] == 'yes'){,		res.redirect('employer-details');,	} else if(req.session.data['employer-address-details'] == 'no'){,        res.redirect('employer-search-address');,    },});,module.exports = router,
Succeeded [Update app/assets/javascripts/application.js]
Found [module.exports = router;,module.exports = router] in [app\routes.js], removing
Succeeded [Overwrite app/assets/javascripts/application.js]
Succeeded [Remove unused directory lib]
Succeeded [Remove unused directory public]
Succeeded [Update routes file]
Succeeded [Remove unused directory docs]
Succeeded [Deleted directories that are no longer needed]
Succeeded [Overwrite app/views/layout.html]
Succeeded [Overwrite app/filters.js]
ENOENT: no such file or directory, stat 'C:\Users\chicks\GitHub\das-assessor-service-prototype\app\views\layout_unbranded.html'
Error: ENOENT: no such file or directory, stat 'C:\Users\chicks\GitHub\das-assessor-service-prototype\app\views\layout_unbranded.html'
    at async Object.stat (node:internal/fs/promises:1033:18)
    at async C:\Users\chicks\GitHub\das-assessor-service-prototype\node_modules\govuk-prototype-kit\lib\utils\index.js:252:22
    at async asyncSeriesMap (C:\Users\chicks\GitHub\das-assessor-service-prototype\node_modules\govuk-prototype-kit\lib\utils\asyncSeriesMap.js:5:18)
    at async searchAndReplaceFiles (C:\Users\chicks\GitHub\das-assessor-service-prototype\node_modules\govuk-prototype-kit\lib\utils\index.js:250:25)
    at async updateUnbrandedLayouts (C:\Users\chicks\GitHub\das-assessor-service-prototype\node_modules\govuk-prototype-kit\migrator\migration-steps.js:256:19)
    at async Promise.all (index 7)
    at async Object.migrate (C:\Users\chicks\GitHub\das-assessor-service-prototype\node_modules\govuk-prototype-kit\migrator\index.js:128:33)
    at async runMigrate (C:\Users\chicks\GitHub\das-assessor-service-prototype\node_modules\govuk-prototype-kit\bin\cli:391:5)
